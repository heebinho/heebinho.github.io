---
layout: layouts/post.njk
title: Pi-hole
date: 2023-02-05
description: Pi-hole setup
tags: ["tech"]
eleventyExcludeFromCollections: true
---  
# Intro   





### Status

```
$ pihole status
  [✓] FTL is listening on port 53
     [✓] UDP (IPv4)
     [✓] TCP (IPv4)
     [✓] UDP (IPv6)
     [✓] TCP (IPv6)

  [✓] Pi-hole blocking is enabled

```


### Web Interface
https://x.x.x.x/admin


### List
[oisd blocklist](https://oisd.nl/)
[youtube](https://raw.githubusercontent.com/kboghdady/youTube_ads_4_pi-hole/master/youtubelist.txt)
https://firebog.net/

### Tools
https://d3ward.github.io/toolz/adblock.html
https://adblock-tester.com/


### Management
sudo curl -sSL https://install.pi-hole.net | bash  
ssh user@x.x.x.xx2
pihole -up
/etc/init.d/networking restart
pihole -r
pihole restartdns

sudo systemctl status pihole-FTL


### Installation
Format card: On Windows, Computer -> Drive -> Format

Flash Image with: Rasperry Pi Imager (x64)
Start Raspi
ssh user@x.x.x.xx2 (heebinho@pi)

```
git clone --depth 1 https://github.com/pi-hole/pi-hole.git pihole
cd "pihole/automated install/"
sudo bash basic-install.sh

```


sudo PIHOLE_SKIP_OS_CHECK=true pihole -r

sudo dhclient
sudo dhclient -r eth0

cat /etc/resolv.conf
# Generated by resolvconf
domain lan
nameserver x.x.x.xx1



https://discourse.pi-hole.net/t/why-wont-pi-hole-work-with-dns-rebind-protection-enabled/3142


OpenWrt Disable IPV6
The following steps will disable IPV6 on your OpenWrt router . All the steps are performed via the command line. You can performe them in the console of the router but the preferred way is via SSH.

Follow the following steps to disable IPV6 on your OpenWrt router:


uci set 'network.lan.ipv6=0'
uci set 'network.wan.ipv6=0'
uci set 'dhcp.lan.dhcpv6=disabled'
/etc/init.d/odhcpd disable
uci commit
Disable RA and DHCPv6 so no IPv6 IPs are handed out:


uci -q delete dhcp.lan.dhcpv6
uci -q delete dhcp.lan.ra
uci commit dhcp
/etc/init.d/odhcpd restart
You can now disable the LAN delegation:


uci set network.lan.delegate="0"
uci commit network
/etc/init.d/network restart
You might as well disable odhcpd:


/etc/init.d/odhcpd disable
/etc/init.d/odhcpd stop
And finally you can delete the IPv6 ULA Prefix:


uci -q delete network.globals.ula_prefix
uci commit network
/etc/init.d/network restart




## Troubleshooting

$ sudo apt update
E: Splitting of clearsigned file /var/lib/apt/lists/deb.debian.org_debian_dists_bullseye_InRelease failed as it doesn't contain all expected parts
E: The package lists or status file could not be parsed or opened.

sudo rm /var/lib/apt/lists/*
sudo apt-get update
sudo apt-get upgrade
pihole -r (reconfigure)
...Didn't work out
rm /etc/pihole/ && reinstall

### Disc 
df -h --total
ui - baobab (disk space analyzer)
https://scotthelme.co.uk/the-first-ever-issue-with-my-pi-hole/



